__d((function(g,r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.YoutubeTranscriptVideoUnavailableError=_e.YoutubeTranscriptTooManyRequestError=_e.YoutubeTranscriptNotAvailableLanguageError=_e.YoutubeTranscriptNotAvailableError=_e.YoutubeTranscriptError=_e.YoutubeTranscriptDisabledError=_e.YoutubeTranscript=void 0;const e=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/i,t='Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.83 Safari/537.36,gzip(gfe)',n=/<text start="([^"]*)" dur="([^"]*)">([^<]*)<\/text>/g;class o extends Error{constructor(e){super(`[YoutubeTranscript] \ud83d\udea8 ${e}`)}}_e.YoutubeTranscriptError=o;class s extends o{constructor(){super('YouTube is receiving too many requests from this IP and now requires solving a captcha to continue')}}_e.YoutubeTranscriptTooManyRequestError=s;class c extends o{constructor(e){super(`The video is no longer available (${e})`)}}_e.YoutubeTranscriptVideoUnavailableError=c;class l extends o{constructor(e){super(`Transcript is disabled on this video (${e})`)}}_e.YoutubeTranscriptDisabledError=l;class u extends o{constructor(e){super(`No transcripts are available for this video (${e})`)}}_e.YoutubeTranscriptNotAvailableError=u;class p extends o{constructor(e,t,n){super(`No transcripts are available in ${e} this video (${n}). Available languages: ${t.join(', ')}`)}}_e.YoutubeTranscriptNotAvailableLanguageError=p;_e.YoutubeTranscript=class{static fetchTranscript(e,o){var v,b,h,T,f;return b=this,h=void 0,f=function*(){const b=this.retrieveVideoId(e),h=yield fetch(`https://www.youtube.com/watch?v=${b}`,{headers:Object.assign(Object.assign({},(null==o?void 0:o.lang)&&{'Accept-Language':o.lang}),{'User-Agent':t})}),T=yield h.text(),f=T.split('"captions":');if(f.length<=1){if(T.includes('class="g-recaptcha"'))throw new s;if(!T.includes('"playabilityStatus":'))throw new c(e);throw new l(e)}const w=null===(v=(()=>{try{return JSON.parse(f[1].split(',"videoDetails')[0].replace('\n',''))}catch(e){return}})())||void 0===v?void 0:v.playerCaptionsTracklistRenderer;if(!w)throw new l(e);if(!('captionTracks'in w))throw new u(e);if((null==o?void 0:o.lang)&&!w.captionTracks.some((e=>e.languageCode===(null==o?void 0:o.lang))))throw new p(null==o?void 0:o.lang,w.captionTracks.map((e=>e.languageCode)),e);const y=((null==o?void 0:o.lang)?w.captionTracks.find((e=>e.languageCode===(null==o?void 0:o.lang))):w.captionTracks[0]).baseUrl,Y=yield fetch(y,{headers:Object.assign(Object.assign({},(null==o?void 0:o.lang)&&{'Accept-Language':o.lang}),{'User-Agent':t})});if(!Y.ok)throw new u(e);return[...(yield Y.text()).matchAll(n)].map((e=>{var t;return{text:e[3],duration:parseFloat(e[2]),offset:parseFloat(e[1]),lang:null!==(t=null==o?void 0:o.lang)&&void 0!==t?t:w.captionTracks[0].languageCode}}))},new((T=void 0)||(T=Promise))((function(e,t){function n(e){try{s(f.next(e))}catch(e){t(e)}}function o(e){try{s(f.throw(e))}catch(e){t(e)}}function s(t){var s;t.done?e(t.value):(s=t.value,s instanceof T?s:new T((function(e){e(s)}))).then(n,o)}s((f=f.apply(b,h||[])).next())}))}static retrieveVideoId(t){if(11===t.length)return t;const n=t.match(e);if(n&&n.length)return n[1];throw new o('Impossible to retrieve Youtube video ID.')}}}),1054,[]);